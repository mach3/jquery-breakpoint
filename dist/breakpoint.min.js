/*!
 * jquery-breakpoint.js
 * --------------------
 * @version 0.1.0
 * @author mach3 <http://github.com/mach3>
 * @license MIT
 * @require jquery#1
 */
!function(a){var b=function(){this._construct.apply(this,arguments)};!function(){var c=b.prototype;c.EVENT_BREAK="break",c.EVENT_CHANGE="change",c.defaults={eventName:null,eventTarget:null,interval:33,points:[],target:a.noop},c.options={},c.emitter=null,c.timer=null,c.value=null,c.index=null,c._construct=function(b){var c=this;this.options={},this.config(this.defaults).config(b),this.emitter=a(this),a.each(["on","off","trigger"],function(a,b){c[b]=function(){return this.emitter[b].apply(this.emitter,arguments),this}}),this.run=a.proxy(this.run,this)},c.config=function(b,c){var d,e=this;switch(d=arguments,a.type(b)){case"string":if(d.length<2)return this.options[b];this.options[b]=this._parse(b,c);break;case"object":a.each(d[0],function(a,b){e.config(a,b)});break;case"undefined":return this.options}return this},c._parse=function(b,c){if("points"===b){if("array"!==a.type(c))throw new Error("Breakpoints: points should be array.");return c.sort(function(a,b){return a-b})}if("target"===b&&!a.isFunction(c))throw new Error("Breakpoints: target should be function");return"eventTarget"===b&&c&&(c="jquery"in c?c:a(c)),c},c.watch=function(){var a=this.options;return a.eventTarget&&a.eventName?(a.eventTarget.on(a.eventName,this.run),this.run()):this.timer=setInterval(this.run,a.interval),this},c.unwatch=function(){var a=this.options;return a.eventTarget&&a.eventName?a.eventTarget.off(a.eventName,this.run):clearInterval(this.timer),this},c.run=function(){var a,b;a=this.config("target")(),this.value!==a&&(this.value=a,b=this._getPosition(a),this.trigger(this.EVENT_CHANGE,b),this.index!==b.index&&(this.index=b.index,this.trigger(this.EVENT_BREAK,b)))},c._getPosition=function(b){var c,d=-1;return c=this.config("points"),a.each(c,function(a,c){return c>b?!1:void(d=a)}),{point:c[d],index:d,value:b}}}(),a.extend(a,{Breakpoint:b,breakpoint:function(b){return new a.Breakpoint(b)}})}(jQuery);